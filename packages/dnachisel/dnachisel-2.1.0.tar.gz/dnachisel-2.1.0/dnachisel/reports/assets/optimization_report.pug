#sidebar: p Generated by DnaChisel version {{__version__}} on {{ pdf_tools.now() }}

.logos
  img(src="file:///{{ dnachisel_logo_url }}" style="height:35px; width: auto")
  img(src="file:///{{ egf_logo_url }}" style="height:35px; width: auto")


h1(style='margin-top: -0.2cm;') Sequence optimization report
h2(style="text-align:center") {{ project_name }}
center
  .ui.statistic.tiny
    .value= len(problem.sequence)
    .label basepairs
  .ui.statistic.tiny
    .value= len(problem.constraints)
    .label constraints
  .ui.statistic.tiny
    .value= len(problem.objectives)
    .label objectives
    
.ui.container
  if constraints_evaluations.all_evaluations_pass()
    
    .ui.icon.message.teal.block-center
      i.check.circle.icon
      .content
        .header The optimization was successful
        p  Below is an overview of the sequence modifications.
        
  else
    
    .ui.icon.message.yellow.block-center
      i.check.circle.icon
      .content
        .header
          | Have you heard about our mailing list?
        p Get the best news in your e-mail every day.

table.ui.compact.table.groups.celled.definition(style="text-align: center;")
  thead
    th
    th Failing constraints
    th Objectives score
    th Nucleotide changes
    th Identicon
  tr
    td Before
    td= len( problem.constraints_before.filter('failing') )
    td= problem.objectives_before.scores_sum(as_text=True)
    td -
    td !{sequenticons['before']}
  tr
    td After
    td= len( constraints_evaluations.filter('failing') )
    td= objectives_evaluations.scores_sum(as_text=True)
    td= edits
    td !{sequenticons['after']}

if constraints_evaluations.all_evaluations_pass()
  if diffs_figure_data
    img#diff-figure(src="{{ diffs_figure_data }}")
  else
    p(style='font-size: 8px').
      Note: install Geneblocks to see a friendly plot of sequence edits here.
      (pip install geneblocks)

style.
 img#diff-figure {
   display: block;
   max-width: 100% !important;
   max-height: 11.5cm !important;
   margin: 0 auto;
 }