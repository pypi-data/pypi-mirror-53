{% spaceless %}{% load rijkshuisstijl rijkshuisstijl_utils %}
    {% capture as base_attrs %} {% if name %} name="{{ name }}"{% endif %}{% if value %} value="{{ value }}"{% endif %}{% endcapture %}
    {% capture as optional_attrs %}{% if choice.value == value or choice.value in value or checked %} checked{% endif %}{% if choice %} value="{{ choice.value }}"{% endif %}{% endcapture %}
    {% capture as valdation_attrs %}{% if disabled %} disabled{% endif %}{% if readonly%} readonly{% endif %}{% if required %} required{% endif %}{% endcapture %}

    {% capture as html_id %}{% if id and choice %}{{ id|add:'_'|add:choice.value|slugify }}{% elif id %}{{ id }}{% elif choice %}{% endif %}{% endcapture %}
    {% capture as meta_attrs %}{% if html_id %} id="{{ html_id }}"{% endif %}{% endcapture %}

    {% capture as data_attrs %}{% if select_all %} data-select-all="{{ select_all }}"{% endif %}{% endcapture %}
    {% capture as additional_attrs %}{% for attr, value in widget_attrs.items %} {{ attr }}="{{ value }}"{% endfor %}{% endcapture %}
    <div class="{{ type|default:'checkbox' }}">
        <input class="input{% if errors %} input--error{% endif %}{% if "readonly" in widget_attrs %} input--readonly{% endif %}{% if select_all %} select-all{% endif %}{% if class %} {{ class }}{% endif %}" type="{{ type|default:'checkbox' }}"{{ base_attrs }}{{ optional_attrs }}{{ valdation_attrs }}{{ meta_attrs }}{{ data_attrs }}{{ additional_attrs }}>
        <div class="{{ type|default:'checkbox' }}__checkmark"></div>
        {% if choice %}{% include 'rijkshuisstijl/components/form/label.html' with for=id label=choice.display %}{% endif %}
        {% if label %}{% include 'rijkshuisstijl/components/form/label.html' with for=id label=label %}{% endif %}
    </div>
{% endspaceless %}
