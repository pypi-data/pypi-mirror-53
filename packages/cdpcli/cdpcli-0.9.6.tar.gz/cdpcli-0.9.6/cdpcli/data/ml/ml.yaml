x-generated: Automatically generated by CDP protoc plugin. Do not edit manually.
swagger: '2.0'
x-endpoint-name: ml
x-products: CDP
x-cdp-releases: PUBLIC
info:
  version: 0.1-SNAPSHOT
  title: Cloudera Machine Learning
  license:
    name: Apache 2.0
  description: Install and manage Cloudera Machine Learning applications.
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /api/v1/ml/createWorkspace:
    post:
      summary: Create a Cloudera Machine Learning workspace.
      description: Provision a Kubernetes cluster and install the Cloudera Machine Learning application in it.
      operationId: createWorkspace
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateWorkspaceRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/CreateWorkspaceResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/deleteWorkspace:
    post:
      summary: Delete Cloudera Machine Learning Workspace.
      description: Deletes a Cloudera Machine Learning workspace.
      operationId: deleteWorkspace
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeleteWorkspaceRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DeleteWorkspaceResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/describeWorkspace:
    post:
      summary: Describe Cloudera Machine Learning Workspace.
      description: Describes a Cloudera Machine Learning workspace.
      operationId: describeWorkspace
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DescribeWorkspaceRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DescribeWorkspaceResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/getLatestWorkspaceVersion:
    post:
      summary: GetLatestWorkspaceVersion Cloudera Machine Learning Workspace.
      description: Retrieves the latest version that Cloudera Machine Learning deploys to workspaces.
      operationId: getLatestWorkspaceVersion
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/GetLatestWorkspaceVersionRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/GetLatestWorkspaceVersionResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/grantWorkspaceAccess:
    post:
      summary: GrantWorkspaceAccess Cloudera Machine Learning Workspace.
      description: Grants an AWS user to perform Kubernetes operations on a Cloudera Machine Learning workspace via EKS.
      operationId: grantWorkspaceAccess
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/GrantWorkspaceAccessRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/GrantWorkspaceAccessResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/listWorkspaces:
    post:
      summary: List Cloudera Machine Learnings workspaces.
      description: List Cloudera Machine Learnings workspaces.
      operationId: listWorkspaces
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/ListWorkspacesRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/ListWorkspacesResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/revokeWorkspaceAccess:
    post:
      summary: RevokeWorkspaceAccess Cloudera Machine Learning Workspace.
      description: Revokes an AWS user to perform Kubernetes operations on a Cloudera Machine Learning workspace via EKS.
      operationId: revokeWorkspaceAccess
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/RevokeWorkspaceAccessRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/RevokeWorkspaceAccessResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/upgradeWorkspace:
    post:
      summary: Upgrade Cloudera Machine Learning workspace.
      description: Upgrades a Cloudera Machine Learning workspace to the latest available version.
      operationId: upgradeWorkspace
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpgradeWorkspaceRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/UpgradeWorkspaceResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
definitions:
  Error:
    type: object
    description: An object returned on an error.
    properties:
      code:
        type: string
        description: The error code.
      message:
        type: string
        description: The error message.
  RootVolume:
    type: object
    description: Configuration for instance root device volume
    properties:
      size:
        type: integer
        format: int64
        description: The volume size in GB.
  Autoscaling:
    type: object
    description: Configuration for instance auto scaling.
    properties:
      enabled:
        type: boolean
        description: The boolean flag to enable the auto scaling.
      maxInstances:
        type: integer
        format: int32
        description: The maximum number of instance for auto scaling.
      minInstances:
        type: integer
        format: int32
        description: The minimum number of instance for auto scaling.
  InstanceGroup:
    type: object
    description: Contains the necessary info for an instance group.
    properties:
      autoscaling:
        description: The auto scaling configuration.
        $ref: '#/definitions/Autoscaling'
      ingressRules:
        type: array
        items:
          type: string
        description: The networking rules for the ingress.
      instanceCount:
        type: integer
        format: int32
        description: The initial number of instance node.
      instanceTier:
        type: string
        description: The tier of the instance i.e. on-demand/spot.
      instanceType:
        type: string
        description: The cloud provider instance type for the node instance.
      name:
        type: string
        description: The unique name of the instance group.
      rootVolume:
        description: The root volume of the instance.
        $ref: '#/definitions/RootVolume'
  Tag:
    type: object
    description: Contains a single tag entry associated with a workspace.
    properties:
      key:
        type: string
        description: The name for the tag.
      value:
        type: string
        description: The value for the tag.
  ProvisionK8sRequest:
    type: object
    description: Request object for workspace provision.
    properties:
      environmentName:
        type: string
        description: The environment for the workspace to create.
      instanceGroups:
        type: array
        items:
          $ref: '#/definitions/InstanceGroup'
        description: The instance groups.
      tags:
        type: array
        items:
          $ref: '#/definitions/Tag'
        description: Tags to add to the cloud provider resources created. This is in addition to any tags added by Cloudera.
  CreateWorkspaceRequest:
    type: object
    description: Request object for the CreateWorkspace method.
    properties:
      disableTLS:
        type: boolean
        description: The boolean flag to disable TLS setup for workspace. By default the TLS is enabled.
      environmentName:
        type: string
        description: The environment for the workspace to create.
      mlVersion:
        type: string
        description: The version of ML workload app to install.
      provisionK8sRequest:
        description: The request for Kubernetes workspace provision.
        $ref: '#/definitions/ProvisionK8sRequest'
      usePublicLoadBalancer:
        type: boolean
        description: The boolean flag to request public load balancer. By default private load balancer is used.
      workspaceName:
        type: string
        description: The name of the workspace to create.
  CreateWorkspaceResponse:
    type: object
    description: Response object for the CreateWorkspace method.
  ListWorkspacesRequest:
    type: object
    description: Request object for the ListWorkspaces method.
  ListWorkspacesResponse:
    type: object
    description: Response object for the ListWorkspaces method.
    properties:
      workspaces:
        type: array
        items:
          $ref: '#/definitions/Workspace'
        description: The list of workspaces.
  Workspace:
    type: object
    description: A ML workspace, which includes the cluster and storage.
    properties:
      creationDate:
        type: string
        format: date-time
        description: Creation date of workspace.
      creatorCrn:
        type: string
        description: The CRN of the creator of the workspace.
      crn:
        type: string
        description: The CRN of the workspace.
      environmentCrn:
        type: string
        description: CRN of the environment.
      environmentName:
        type: string
        description: The name of the workspace's environment.
      instanceName:
        type: string
        description: The name of the workspace.
      instanceStatus:
        type: string
        description: The workspace's current status.
      instanceUrl:
        type: string
        description: URL of the workspace's user interface.
      k8sClusterName:
        type: string
        description: The Kubernetes cluster name.
      version:
        type: string
        description: The version of Clouder Machine Learning that was installed on the workspace.
  UpgradeWorkspaceRequest:
    type: object
    description: Request object for the UpgradeWorkspace method.
    properties:
      environmentName:
        type: string
        description: The environment the workspace.
      mlVersion:
        type: string
        description: The version of workspace to upgrade to.
      workspaceName:
        type: string
        description: The name of the workspace.
  UpgradeWorkspaceResponse:
    type: object
    description: Response object for the UpgradeWorkspace method.
  DescribeWorkspaceRequest:
    type: object
    description: Request object for the DescribeWorkspace method.
    properties:
      environmentName:
        type: string
        description: The environment for the workspace to describe.
      workspaceName:
        type: string
        description: The name of the workspace to describe.
  DescribeWorkspaceResponse:
    type: object
    description: Response object for the DescribeWorkspace method.
    properties:
      workspace:
        description: The workspace.
        $ref: '#/definitions/Workspace'
  DeleteWorkspaceRequest:
    type: object
    description: Request object for the DeleteWorkspace method.
    properties:
      environmentName:
        type: string
        description: The environment for the workspace to delete.
      force:
        type: boolean
        description: Force delete a workspace even if errors occur during deletion. Force delete removes the guarantee that resources in your cloud account will be cleaned up.
      removeStorage:
        type: boolean
        description: The remove storage flag indicates weather to keep the backing workspace filesystem storage or remove it during delete.
      workspaceName:
        type: string
        description: The name of the workspace to delete.
  DeleteWorkspaceResponse:
    type: object
    description: Response object for the DeleteWorkspace method.
  GrantWorkspaceAccessRequest:
    type: object
    description: Request object for the GrantWorkspaceAccess method.
    properties:
      arn:
        type: string
        description: The aws user ARN to grant access to the corresponding EKS cluster.
      environmentName:
        type: string
        description: The environment that the workspace is a member of.
      workspaceName:
        type: string
        description: The name of the workspace to grant access to.
  GrantWorkspaceAccessResponse:
    type: object
    description: Response object for the GrantWorkspaceAccess method.
    properties:
      kubeconfig:
        type: string
        description: The Kubernetes config file
  RevokeWorkspaceAccessRequest:
    type: object
    description: Request object for the RevokeWorkspace method.
    properties:
      arn:
        type: string
        description: The aws user ARN to revoke access to the corresponding EKS cluster.
      environmentName:
        type: string
        description: The environment that the workspace is a member of.
      workspaceName:
        type: string
        description: The name of the workspace to revoke access to.
  RevokeWorkspaceAccessResponse:
    type: object
    description: Response object for the RevokeWorkspaceAccess method.
  GetLatestWorkspaceVersionRequest:
    type: object
    description: Request object for GetLatestWorkspaceVersion
  GetLatestWorkspaceVersionResponse:
    type: object
    description: Response object for GetLatestWorkspaceVersion
    properties:
      version:
        type: string
        description: The latest version of a workspace that is used when deploying Cloudera Machine Learning workspaces.
