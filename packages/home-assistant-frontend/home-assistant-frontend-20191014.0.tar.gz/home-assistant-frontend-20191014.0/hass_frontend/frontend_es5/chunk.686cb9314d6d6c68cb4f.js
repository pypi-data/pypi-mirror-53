(self.webpackJsonp=self.webpackJsonp||[]).push([[77],{198:function(e,t,o){"use strict";var n=o(239);o.d(t,"a",function(){return r});var r=Object(n.a)({types:{"entity-id":function(e){return"string"!=typeof e?"entity id should be a string":!!e.includes(".")||"entity id should be in the format 'domain.entity'"},icon:function(e){return"string"!=typeof e?"icon should be a string":!!e.includes(":")||"icon should be in the format 'mdi:icon'"}}})},240:function(e,t,o){"use strict";var n,r=o(0),i=o(18),a=o(1);!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autofocus=!1,t.rtl=!1,t.error=!1,t._value="",t}Object(r.d)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.codemirror?this.codemirror.getValue():this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasComments",{get:function(){return!!this.shadowRoot.querySelector("span.cm-comment")},enumerable:!0,configurable:!0}),t.prototype.connectedCallback=function(){e.prototype.connectedCallback.call(this),this.codemirror&&(this.codemirror.refresh(),!1!==this.autofocus&&this.codemirror.focus())},t.prototype.update=function(t){e.prototype.update.call(this,t),this.codemirror&&(t.has("mode")&&this.codemirror.setOption("mode",this.mode),t.has("autofocus")&&this.codemirror.setOption("autofocus",!1!==this.autofocus),t.has("_value")&&this._value!==this.value&&this.codemirror.setValue(this._value),t.has("rtl")&&(this.codemirror.setOption("gutters",this._calcGutters()),this._setScrollBarDirection()),t.has("error")&&this.classList.toggle("error-state",this.error))},t.prototype.firstUpdated=function(t){e.prototype.firstUpdated.call(this,t),this._load()},t.prototype._load=function(){return Object(r.b)(this,void 0,void 0,function(){var e,t,i,a=this;return Object(r.e)(this,function(c){switch(c.label){case 0:return[4,Object(r.b)(void 0,void 0,void 0,function(){return Object(r.e)(this,function(e){return n||(n=Promise.all([o.e(117),o.e(26)]).then(o.bind(null,718))),[2,n]})})];case 1:return e=c.sent(),t=e.codeMirror,(i=this.attachShadow({mode:"open"})).innerHTML="\n    <style>\n      "+e.codeMirrorCss+"\n      .CodeMirror {\n        height: var(--code-mirror-height, auto);\n        direction: var(--code-mirror-direction, ltr);\n      }\n      .CodeMirror-scroll {\n        max-height: var(--code-mirror-max-height, --code-mirror-height);\n      }\n      .CodeMirror-gutters {\n        border-right: 1px solid var(--paper-input-container-color, var(--secondary-text-color));\n        background-color: var(--paper-dialog-background-color, var(--primary-background-color));\n        transition: 0.2s ease border-right;\n      }\n      :host(.error-state) .CodeMirror-gutters {\n        border-color: var(--error-state-color, red);\n      }\n      .CodeMirror-focused .CodeMirror-gutters {\n        border-right: 2px solid var(--paper-input-container-focus-color, var(--primary-color));\n      }\n      .CodeMirror-linenumber {\n        color: var(--paper-dialog-color, var(--primary-text-color));\n      }\n      .rtl .CodeMirror-vscrollbar {\n        right: auto;\n        left: 0px;\n      }\n      .rtl-gutter {\n        width: 20px;\n      }\n    </style>",this.codemirror=t(i,{value:this._value,lineNumbers:!0,tabSize:2,mode:this.mode,autofocus:!1!==this.autofocus,viewportMargin:1/0,extraKeys:{Tab:"indentMore","Shift-Tab":"indentLess"},gutters:this._calcGutters()}),this._setScrollBarDirection(),this.codemirror.on("changes",function(){return a._onChange()}),[2]}})})},t.prototype._onChange=function(){var e=this.value;e!==this._value&&(this._value=e,Object(i.a)(this,"value-changed",{value:this._value}))},t.prototype._calcGutters=function(){return this.rtl?["rtl-gutter","CodeMirror-linenumbers"]:[]},t.prototype._setScrollBarDirection=function(){this.codemirror&&this.codemirror.getWrapperElement().classList.toggle("rtl",this.rtl)},Object(r.c)([Object(a.g)()],t.prototype,"mode",void 0),Object(r.c)([Object(a.g)()],t.prototype,"autofocus",void 0),Object(r.c)([Object(a.g)()],t.prototype,"rtl",void 0),Object(r.c)([Object(a.g)()],t.prototype,"error",void 0),Object(r.c)([Object(a.g)()],t.prototype,"_value",void 0),t=Object(r.c)([Object(a.d)("ha-code-editor")],t)}(a.b)},693:function(e,t,o){"use strict";o.r(t);var n,r,i=o(0),a=o(1),c=o(73),s=o(287),l=o.n(s),d=(o(205),o(220),o(150),o(85),o(108),o(189),o(198)),u=(o(179),o(56)),h=(o(240),o(96)),p=d.a.interface({title:"string?",views:["object"],resources:d.a.optional(["object"])}),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._generation=1,t}return Object(i.d)(t,e),Object.defineProperty(t,"properties",{get:function(){return{hass:{},lovelace:{},closeEditor:{},_saving:{},_changed:{}}},enumerable:!0,configurable:!0}),t.prototype.render=function(){return Object(a.f)(n||(n=Object(i.f)(['\n      <app-header-layout>\n        <app-header>\n          <app-toolbar>\n            <paper-icon-button\n              icon="hass:close"\n              @click="','"\n            ></paper-icon-button>\n            <div main-title>\n              ','\n            </div>\n            <div\n              class="save-button\n              ','"\n            >\n              ','\n            </div>\n            <mwc-button raised @click="','"\n              >','</mwc-button\n            >\n          </app-toolbar>\n        </app-header>\n        <div class="content">\n          <ha-code-editor\n            mode="yaml"\n            autofocus\n            .rtl=','\n            .hass="','"\n            @value-changed="','"\n            @editor-save="','"\n          >\n          </ha-code-editor>\n        </div>\n      </app-header-layout>\n    '],['\n      <app-header-layout>\n        <app-header>\n          <app-toolbar>\n            <paper-icon-button\n              icon="hass:close"\n              @click="','"\n            ></paper-icon-button>\n            <div main-title>\n              ','\n            </div>\n            <div\n              class="save-button\n              ','"\n            >\n              ','\n            </div>\n            <mwc-button raised @click="','"\n              >','</mwc-button\n            >\n          </app-toolbar>\n        </app-header>\n        <div class="content">\n          <ha-code-editor\n            mode="yaml"\n            autofocus\n            .rtl=','\n            .hass="','"\n            @value-changed="','"\n            @editor-save="','"\n          >\n          </ha-code-editor>\n        </div>\n      </app-header-layout>\n    '])),this._closeEditor,this.hass.localize("ui.panel.lovelace.editor.raw_editor.header"),Object(c.a)({saved:!1===this._saving||!0===this._changed}),this._changed?this.hass.localize("ui.panel.lovelace.editor.raw_editor.unsaved_changes"):this.hass.localize("ui.panel.lovelace.editor.raw_editor.saved"),this._handleSave,this.hass.localize("ui.panel.lovelace.editor.raw_editor.save"),Object(h.a)(this.hass),this.hass,this._yamlChanged,this._handleSave)},t.prototype.firstUpdated=function(){this.yamlEditor.value=l.a.safeDump(this.lovelace.config)},Object.defineProperty(t,"styles",{get:function(){return[u.a,Object(a.c)(r||(r=Object(i.f)(["\n        :host {\n          --code-mirror-height: 100%;\n        }\n\n        app-header-layout {\n          height: 100vh;\n        }\n\n        app-toolbar {\n          background-color: var(--dark-background-color, #455a64);\n          color: var(--dark-text-color);\n        }\n\n        .comments {\n          font-size: 16px;\n        }\n\n        .content {\n          height: calc(100vh - 68px);\n        }\n\n        hui-code-editor {\n          height: 100%;\n        }\n\n        .save-button {\n          opacity: 0;\n          font-size: 14px;\n          padding: 0px 10px;\n        }\n\n        .saved {\n          opacity: 1;\n        }\n      "],["\n        :host {\n          --code-mirror-height: 100%;\n        }\n\n        app-header-layout {\n          height: 100vh;\n        }\n\n        app-toolbar {\n          background-color: var(--dark-background-color, #455a64);\n          color: var(--dark-text-color);\n        }\n\n        .comments {\n          font-size: 16px;\n        }\n\n        .content {\n          height: calc(100vh - 68px);\n        }\n\n        hui-code-editor {\n          height: 100%;\n        }\n\n        .save-button {\n          opacity: 0;\n          font-size: 14px;\n          padding: 0px 10px;\n        }\n\n        .saved {\n          opacity: 1;\n        }\n      "])))]},enumerable:!0,configurable:!0}),t.prototype._yamlChanged=function(){this._changed=!this.yamlEditor.codemirror.getDoc().isClean(this._generation),this._changed&&!window.onbeforeunload?window.onbeforeunload=function(){return!0}:!this._changed&&window.onbeforeunload&&(window.onbeforeunload=null)},t.prototype._closeEditor=function(){this._changed&&!confirm("You have unsaved changes, are you sure you want to exit?")||(window.onbeforeunload=null,this.closeEditor&&this.closeEditor())},t.prototype._handleSave=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t;return Object(i.e)(this,function(o){switch(o.label){case 0:if(this._saving=!0,this.yamlEditor.hasComments&&!confirm("Your config contains comment(s), these will not be saved. Do you want to continue?"))return[2];try{e=l.a.safeLoad(this.yamlEditor.value)}catch(n){return alert("Unable to parse YAML: "+n),this._saving=!1,[2]}try{e=p(e)}catch(n){return alert("Your config is not valid: "+n),[2]}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.lovelace.saveConfig(e)];case 2:return o.sent(),[3,4];case 3:return t=o.sent(),alert("Unable to save YAML: "+t),[3,4];case 4:return this._generation=this.yamlEditor.codemirror.getDoc().changeGeneration(!0),window.onbeforeunload=null,this._saving=!1,this._changed=!1,[2]}})})},Object.defineProperty(t.prototype,"yamlEditor",{get:function(){return this.shadowRoot.querySelector("ha-code-editor")},enumerable:!0,configurable:!0}),t}(a.a);customElements.define("hui-editor",v)}}]);
//# sourceMappingURL=chunk.686cb9314d6d6c68cb4f.js.map