

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Selection &mdash; Selection Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../docattribute.html">Selection documentation attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algorithms/index.html">Non-randomized algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../randomized/index.html">Randomized algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learning/index.html">Learning selection</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Selection documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">selection</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Selection</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/api/generated/nipy.labs.spatial_models.hroi.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="labs-spatial-models-hroi">
<h1>labs.spatial_models.hroi<a class="headerlink" href="#labs-spatial-models-hroi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-labs-spatial-models-hroi">
<h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">labs.spatial_models.hroi</span></code><a class="headerlink" href="#module-labs-spatial-models-hroi" title="Permalink to this headline">¶</a></h2>
<p>Inheritance diagram for <code class="docutils literal notranslate"><span class="pre">nipy.labs.spatial_models.hroi</span></code>:</p>
digraph inheritance73ccd54741 {
rankdir=LR;
size=&quot;8.0, 12.0&quot;;
  &quot;spatial_models.hroi.HierarchicalROI&quot; [URL=&quot;#nipy.labs.spatial_models.hroi.HierarchicalROI&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Class that handles hierarchical ROIs&quot;];
  &quot;spatial_models.mroi.SubDomains&quot; -&gt; &quot;spatial_models.hroi.HierarchicalROI&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;spatial_models.mroi.SubDomains&quot; [URL=&quot;nipy.labs.spatial_models.mroi.html#nipy.labs.spatial_models.mroi.SubDomains&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This is a class to represent multiple ROI objects, where the&quot;];
}
<span class="target" id="module-nipy.labs.spatial_models.hroi"></span><p>This module contains the specification of ‘hierarchical ROI’ object,
Which is used in spatial models of the library such as structural analysis</p>
<p>The connection with other classes is not completely satisfactory at the moment:
there should be some intermediate classes between ‘Fields’ and ‘hroi’</p>
<dl class="simple">
<dt>Author<span class="classifier">Bertrand Thirion, 2009-2011</span></dt><dd><p>Virgile Fritsch &lt;<a class="reference external" href="mailto:virgile&#46;fritsch&#37;&#52;&#48;inria&#46;fr">virgile<span>&#46;</span>fritsch<span>&#64;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</dd>
</dl>
</div>
<div class="section" id="class">
<h2>Class<a class="headerlink" href="#class" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="hierarchicalroi">
<h2><a class="reference internal" href="#nipy.labs.spatial_models.hroi.HierarchicalROI" title="nipy.labs.spatial_models.hroi.HierarchicalROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchicalROI</span></code></a><a class="headerlink" href="#hierarchicalroi" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI">
<em class="property">class </em><code class="sig-prename descclassname">nipy.labs.spatial_models.hroi.</code><code class="sig-name descname">HierarchicalROI</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">label</em>, <em class="sig-param">parents</em>, <em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="nipy.labs.spatial_models.mroi.html#nipy.labs.spatial_models.mroi.SubDomains" title="nipy.labs.spatial_models.mroi.SubDomains"><code class="xref py py-class docutils literal notranslate"><span class="pre">nipy.labs.spatial_models.mroi.SubDomains</span></code></a></p>
<p>Class that handles hierarchical ROIs</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>k</strong> : int</p>
<blockquote>
<div><p>Number of ROI in the SubDomains object</p>
</div></blockquote>
<p><strong>label</strong> : array of shape (domain.size), dtype=np.int</p>
<blockquote>
<div><p>An array use to define which voxel belongs to which ROI.
The label values greater than -1 correspond to subregions
labelling. The labels are recomputed so as to be consecutive
integers.
The labels should not be accessed outside this class. One has to
use the API mapping methods instead.</p>
</div></blockquote>
<p><strong>features</strong> : dict {str: list of object, length=self.k}</p>
<blockquote>
<div><p>Describe the voxels features, grouped by ROI</p>
</div></blockquote>
<p><strong>roi_features</strong> : dict {str: array-like, shape=(self.k, roi_feature_dim)</p>
<blockquote>
<div><p>Describe the ROI features. A special feature, <cite>id</cite>, is read-only and
is used to give an unique identifier for region, which is persistent
through the MROI objects manipulations. On should access the different
ROI’s features using ids.</p>
</div></blockquote>
<p><strong>parents</strong> : np.ndarray, shape(self.k)</p>
<blockquote>
<div><p>self.parents[i] is the index of the parent of the i-th ROI.</p>
</div></blockquote>
<p><strong>TODO: have the parents as a list of id rather than a list of indices.</strong></p>
</dd>
</dl>
<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">label</em>, <em class="sig-param">parents</em>, <em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Building the HierarchicalROI</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_volume">
<code class="sig-name descname">get_volume</code><span class="sig-paren">(</span><em class="sig-param">id=None</em>, <em class="sig-param">ignore_children=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.get_volume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ROI volume</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id: any hashable type, optional</strong></p>
<blockquote>
<div><p>Id of the ROI from which we want to get the volume.
Can be None (default) if we want all ROIs’s volumes.</p>
</div></blockquote>
<p><strong>ignore_children</strong> : bool, optional</p>
<blockquote>
<div><p>Specify if the volume of the node should include
(ignore_children = False) or not the one of its children
(ignore_children = True).</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>volume</strong> : float</p>
<blockquote>
<div><dl class="simple">
<dt>if an id is provided,</dt><dd><p>or list of float</p>
</dd>
</dl>
<p>if no id provided (default)</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_size">
<code class="sig-name descname">get_size</code><span class="sig-paren">(</span><em class="sig-param">id=None</em>, <em class="sig-param">ignore_children=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.get_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ROI size (counted in terms of voxels)</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id: any hashable type, optional</strong></p>
<blockquote>
<div><p>Id of the ROI from which we want to get the size.
Can be None (default) if we want all ROIs’s sizes.</p>
</div></blockquote>
<p><strong>ignore_children: bool, optional</strong></p>
<blockquote>
<div><p>Specify if the size of the node should include
(ignore_children = False) or not the one of its children
(ignore_children = True).</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>size: int</p>
<blockquote>
<div><dl class="simple">
<dt>if an id is provided,</dt><dd><p>or list of int</p>
</dd>
</dl>
<p>if no id provided (default)</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.select_roi">
<code class="sig-name descname">select_roi</code><span class="sig-paren">(</span><em class="sig-param">id_list</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.select_roi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.select_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of HROI with only the subset of chosen ROIs.</p>
<p>The hierarchy is set accordingly.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id_list: list of id (any hashable type)</strong></p>
<blockquote>
<div><p>The id of the ROI to be kept in the structure.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.make_graph">
<code class="sig-name descname">make_graph</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.make_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.make_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Output an nipy graph structure to represent the ROI hierarchy.</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.make_forest">
<code class="sig-name descname">make_forest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.make_forest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.make_forest" title="Permalink to this definition">¶</a></dt>
<dd><p>Output an nipy forest structure to represent the ROI hierarchy.</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.merge_ascending">
<code class="sig-name descname">merge_ascending</code><span class="sig-paren">(</span><em class="sig-param">id_list</em>, <em class="sig-param">pull_features=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.merge_ascending"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.merge_ascending" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the non-valid ROIs by including them in
their parents when it exists.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id_list: list of id (any hashable type)</strong></p>
<blockquote>
<div><p>The id of the ROI to be merged into their parents.
Nodes that are their own parent are unmodified.</p>
</div></blockquote>
<p><strong>pull_features: list of str</strong></p>
<blockquote>
<div><p>List of the ROI features that will be pooled from the children
when they are merged into their parents. Otherwise, the receiving
parent would keep its own ROI feature.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.merge_descending">
<code class="sig-name descname">merge_descending</code><span class="sig-paren">(</span><em class="sig-param">pull_features=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.merge_descending"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.merge_descending" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the items with only one son by including them in their son</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>methods indicates the way possible features are dealt with</strong></p>
<p><strong>(not implemented yet)</strong></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Caveat: if roi_features have been defined, they will be removed</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_parents">
<code class="sig-name descname">get_parents</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.get_parents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_parents" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the parent of each node in the hierarchy</p>
<p>The parents are represented by their position in the nodes flat list.</p>
<p>TODO:
The purpose of this class API is not to rely on this order, so
we should have self.parents as a list of ids instead of a list of
positions</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_leaves_id">
<code class="sig-name descname">get_leaves_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.get_leaves_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_leaves_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ids of the leaves.</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.reduce_to_leaves">
<code class="sig-name descname">reduce_to_leaves</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.reduce_to_leaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.reduce_to_leaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a  new set of rois which are only the leaves of self.</p>
<p>Modification of the structure is done in place. One way therefore
want to work on a copy a of a given HROI oject.</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of self.</p>
<p>self.domain is not copied.</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.representative_feature">
<code class="sig-name descname">representative_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em>, <em class="sig-param">method='mean'</em>, <em class="sig-param">id=None</em>, <em class="sig-param">ignore_children=True</em>, <em class="sig-param">assess_quality=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HierarchicalROI.representative_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.representative_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a ROI representative of a given feature.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid: str,</strong></p>
<blockquote>
<div><p>Feature id</p>
</div></blockquote>
<p><strong>method: str,</strong></p>
<blockquote>
<div><p>Method used to compute a representative.
Chosen among ‘mean’ (default), ‘max’, ‘median’, ‘min’,
‘weighted mean’.</p>
</div></blockquote>
<p><strong>id: any hashable type</strong></p>
<blockquote>
<div><p>Id of the ROI from which we want to extract a representative feature.
Can be None (default) if we want to get all ROIs’s representatives.</p>
</div></blockquote>
<p><strong>ignore_children: bool,</strong></p>
<blockquote>
<div><p>Specify if the volume of the node should include
(ignore_children = False) or not the one of its children
(ignore_children = True).</p>
</div></blockquote>
<p><strong>assess_quality: bool</strong></p>
<blockquote>
<div><p>If True, a new roi feature is created, which represent the quality
of the feature representative (the number of non-nan value for the
feature over the ROI size).
Default is False.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.feature_to_voxel_map">
<code class="sig-name descname">feature_to_voxel_map</code><span class="sig-paren">(</span><em class="sig-param">fid</em>, <em class="sig-param">roi=False</em>, <em class="sig-param">method='mean'</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.feature_to_voxel_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a feature to a flat voxel-mapping array.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid: str</strong></p>
<blockquote>
<div><p>Identifier of the feature to be mapped.</p>
</div></blockquote>
<p><strong>roi: bool, optional</strong></p>
<blockquote>
<div><p>If True, compute the map from a ROI feature.</p>
</div></blockquote>
<p><strong>method: str, optional</strong></p>
<blockquote>
<div><p>Representative feature computation method if <cite>fid</cite> is a feature
and <cite>roi</cite> is True.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>res: array-like, shape=(domain.size, feature_dim)</p>
<blockquote>
<div><p>A flat array, giving the correspondence between voxels
and the feature.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_coord">
<code class="sig-name descname">get_coord</code><span class="sig-paren">(</span><em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_coord" title="Permalink to this definition">¶</a></dt>
<dd><p>Get coordinates of ROI’s voxels</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id: any hashable type</strong></p>
<blockquote>
<div><p>Id of the ROI from which we want the voxels’ coordinates.
Can be None (default) if we want all ROIs’s voxels coordinates.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>coords: array-like, shape=(roi_size, domain_dimension)</p>
<blockquote>
<div><dl class="simple">
<dt>if an id is provided,</dt><dd><p>or list of arrays of shape(roi_size, domain_dimension)</p>
</dd>
</dl>
<p>if no id provided (default)</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_feature">
<code class="sig-name descname">get_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em>, <em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a voxel-wise feature, grouped by ROI.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid: str,</strong></p>
<blockquote>
<div><p>Feature to be returned</p>
</div></blockquote>
<p><strong>id: any hashable type</strong></p>
<blockquote>
<div><p>Id of the ROI from which we want to get the feature.
Can be None (default) if we want all ROIs’s features.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>feature: array-like, shape=(roi_size, feature_dim)</p>
<blockquote>
<div><dl class="simple">
<dt>if an id is provided,</dt><dd><p>or list of arrays, shape=(roi_size, feature_dim)</p>
</dd>
</dl>
<p>if no id provided (default)</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_id">
<code class="sig-name descname">get_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return ROI’s id list.</p>
<p>Users must access ROIs with the use of the identifiers of this list
and the methods that give access to their properties/features.</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_local_volume">
<code class="sig-name descname">get_local_volume</code><span class="sig-paren">(</span><em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_local_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Get volume of ROI’s voxels</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id: any hashable type</strong></p>
<blockquote>
<div><p>Id of the ROI from which we want the voxels’ volumes.
Can be None (default) if we want all ROIs’s voxels volumes.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loc_volume: array-like, shape=(roi_size, ),</p>
<blockquote>
<div><dl class="simple">
<dt>if an id is provided,</dt><dd><p>or list of arrays of shape(roi_size, )</p>
</dd>
</dl>
<p>if no id provided (default)</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.get_roi_feature">
<code class="sig-name descname">get_roi_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em>, <em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.get_roi_feature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.integrate">
<code class="sig-name descname">integrate</code><span class="sig-paren">(</span><em class="sig-param">fid=None</em>, <em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.integrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Integrate  certain feature on each ROI and return the k results</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid</strong> : str</p>
<blockquote>
<div><p>Feature identifier.
By default, the 1 function is integrated, yielding ROI volumes.</p>
</div></blockquote>
<p><strong>id: any hashable type</strong></p>
<blockquote>
<div><p>The ROI on which we want to integrate.
Can be None if we want the results for every region.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>lsum = array of shape (self.k, self.feature[fid].shape[1]),</p>
<blockquote>
<div><p>The results</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.plot_feature">
<code class="sig-name descname">plot_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em>, <em class="sig-param">ax=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.plot_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Boxplot the distribution of features within ROIs.
Note that this assumes 1-d features.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid: string</strong></p>
<blockquote>
<div><p>the feature identifier</p>
</div></blockquote>
<p><strong>ax: axis handle, optional</strong></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.recompute_labels">
<code class="sig-name descname">recompute_labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.recompute_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Redefine labels so that they are consecutive integers.</p>
<p>Labels are used as a map to associate voxels to a given ROI.
It is an inner object that should not be accessed outside this class.
The number of nodes is updated appropriately.</p>
<p class="rubric">Notes</p>
<p>This method must be called everytime the MROI structure is modified.</p>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.remove_feature">
<code class="sig-name descname">remove_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.remove_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a certain feature</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid: str</strong></p>
<blockquote>
<div><p>Feature id</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>f</strong> : object</p>
<blockquote>
<div><p>The removed feature.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.remove_roi_feature">
<code class="sig-name descname">remove_roi_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.remove_roi_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a certain ROI feature.</p>
<p>The <cite>id</cite> ROI feature cannot be removed.</p>
<dl class="field-list">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>f</strong> : object</p>
<blockquote>
<div><p>The removed Roi feature.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.select_id">
<code class="sig-name descname">select_id</code><span class="sig-paren">(</span><em class="sig-param">id</em>, <em class="sig-param">roi=True</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.select_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a ROI id into an index to be used to index features safely.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id</strong> : any hashable type, must be in self.get_id()</p>
<blockquote>
<div><p>The id of the region one wants to access.</p>
</div></blockquote>
<p><strong>roi</strong> : bool</p>
<blockquote>
<div><p>If True (default), return the ROI index in the ROI list.
If False, return the indices of the voxels of the ROI with the given
id. That way, internal access to self.label can be made.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>index</strong> : int or np.array of shape (roi.size, )</p>
<blockquote>
<div><p>Either the position of the ROI in the ROI list (if roi == True),
or the positions of the voxels of the ROI with id <cite>id</cite>
with respect to the self.label array.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.set_feature">
<code class="sig-name descname">set_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em>, <em class="sig-param">data</em>, <em class="sig-param">id=None</em>, <em class="sig-param">override=False</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.set_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Append or modify a feature</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid</strong> : str</p>
<blockquote>
<div><p>feature identifier</p>
</div></blockquote>
<p><strong>data: list or array</strong></p>
<blockquote>
<div><p>The feature data. Can be a list of self.k arrays of
shape(self.size[k], p) or array of shape(self.size[k])</p>
</div></blockquote>
<p><strong>id: any hashable type, optional</strong></p>
<blockquote>
<div><p>Id of the ROI from which we want to set the feature.
Can be None (default) if we want to set all ROIs’s features.</p>
</div></blockquote>
<p><strong>override: bool, optional</strong></p>
<blockquote>
<div><p>Allow feature overriding</p>
</div></blockquote>
<p><strong>Note that we cannot create a feature having the same name than</strong></p>
<p><strong>a ROI feature.</strong></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.set_roi_feature">
<code class="sig-name descname">set_roi_feature</code><span class="sig-paren">(</span><em class="sig-param">fid</em>, <em class="sig-param">data</em>, <em class="sig-param">id=None</em>, <em class="sig-param">override=False</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.set_roi_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Append or modify a ROI feature</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid: str,</strong></p>
<blockquote>
<div><p>feature identifier</p>
</div></blockquote>
<p><strong>data: list of self.k features or a single feature</strong></p>
<blockquote>
<div><p>The ROI feature data</p>
</div></blockquote>
<p><strong>id: any hashable type</strong></p>
<blockquote>
<div><p>Id of the ROI of which we want to set the ROI feature.
Can be None (default) if we want to set all ROIs’s ROI features.</p>
</div></blockquote>
<p><strong>override: bool, optional,</strong></p>
<blockquote>
<div><p>Allow feature overriding</p>
</div></blockquote>
<p><strong>Note that we cannot create a ROI feature having the same name than</strong></p>
<p><strong>a feature.</strong></p>
<p><strong>Note that the `id` feature cannot be modified as an internal</strong></p>
<p><strong>component.</strong></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nipy.labs.spatial_models.hroi.HierarchicalROI.to_image">
<code class="sig-name descname">to_image</code><span class="sig-paren">(</span><em class="sig-param">fid=None</em>, <em class="sig-param">roi=False</em>, <em class="sig-param">method='mean'</em>, <em class="sig-param">descrip=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HierarchicalROI.to_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a label image that represents self.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid: str,</strong></p>
<blockquote>
<div><p>Feature to be represented. If None, a binary image of the MROI
domain will be we created.</p>
</div></blockquote>
<p><strong>roi: bool,</strong></p>
<blockquote>
<div><p>Whether or not to write the desired feature as a ROI one.
(i.e. a ROI feature corresponding to <cite>fid</cite> will be looked upon,
and if not found, a representative feature will be computed from
the <cite>fid</cite> feature).</p>
</div></blockquote>
<p><strong>method: str,</strong></p>
<blockquote>
<div><p>If a feature is written as a ROI feature, this keyword tweaks
the way the representative feature is computed.</p>
</div></blockquote>
<p><strong>descrip: str,</strong></p>
<blockquote>
<div><p>Description of the image, to be written in its header.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>nim</strong> : nibabel nifti image</p>
<blockquote>
<div><p>Nifti image corresponding to the ROI feature to be written.</p>
</div></blockquote>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Requires that self.dom is an ddom.NDGridDomain</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="nipy.labs.spatial_models.hroi.HROI_as_discrete_domain_blobs">
<code class="sig-prename descclassname">nipy.labs.spatial_models.hroi.</code><code class="sig-name descname">HROI_as_discrete_domain_blobs</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">data</em>, <em class="sig-param">threshold=-inf</em>, <em class="sig-param">smin=0</em>, <em class="sig-param">criterion='size'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HROI_as_discrete_domain_blobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HROI_as_discrete_domain_blobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate an HierarchicalROI as the blob decomposition
of data in a certain domain.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>domain</strong> : discrete_domain.StructuredDomain instance,</p>
<blockquote>
<div><p>Definition of the spatial context.</p>
</div></blockquote>
<p><strong>data</strong> : array of shape (domain.size)</p>
<blockquote>
<div><p>The corresponding data field.</p>
</div></blockquote>
<p><strong>threshold</strong> : float, optional</p>
<blockquote>
<div><p>Thresholding level.</p>
</div></blockquote>
<p><strong>criterion</strong> : string, optional</p>
<blockquote>
<div><p>To be chosen among ‘size’ or ‘volume’.</p>
</div></blockquote>
<p><strong>smin: float, optional</strong></p>
<blockquote>
<div><p>A threshold on the criterion.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nroi: HierachicalROI instance with a <cite>signal</cite> feature.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nipy.labs.spatial_models.hroi.HROI_from_watershed">
<code class="sig-prename descclassname">nipy.labs.spatial_models.hroi.</code><code class="sig-name descname">HROI_from_watershed</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">data</em>, <em class="sig-param">threshold=-inf</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#HROI_from_watershed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.HROI_from_watershed" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate an HierarchicalROI as the watershed of a certain dataset</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>domain: discrete_domain.StructuredDomain instance</strong></p>
<blockquote>
<div><p>Definition of the spatial context.</p>
</div></blockquote>
<p><strong>data: array of shape (domain.size)</strong></p>
<blockquote>
<div><p>The corresponding data field.</p>
</div></blockquote>
<p><strong>threshold: float, optional</strong></p>
<blockquote>
<div><p>Thresholding level.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>nroi</strong> : <code class="docutils literal notranslate"><span class="pre">HierarchichalROI</span></code> instance</p>
<blockquote>
<div><p>The HierachicalROI instance with a <code class="docutils literal notranslate"><span class="pre">seed</span></code> feature.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nipy.labs.spatial_models.hroi.hroi_agglomeration">
<code class="sig-prename descclassname">nipy.labs.spatial_models.hroi.</code><code class="sig-name descname">hroi_agglomeration</code><span class="sig-paren">(</span><em class="sig-param">input_hroi</em>, <em class="sig-param">criterion='size'</em>, <em class="sig-param">smin=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#hroi_agglomeration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.hroi_agglomeration" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs an agglomeration then a selection of regions
so that a certain size or volume criterion is satisfied.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_hroi: HierarchicalROI instance</strong></p>
<blockquote>
<div><p>The input hROI</p>
</div></blockquote>
<p><strong>criterion: str, optional</strong></p>
<blockquote>
<div><p>To be chosen among ‘size’ or ‘volume’</p>
</div></blockquote>
<p><strong>smin: float, optional</strong></p>
<blockquote>
<div><p>The applied criterion</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>output_hroi:  HierarchicalROI instance</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nipy.labs.spatial_models.hroi.make_hroi_from_subdomain">
<code class="sig-prename descclassname">nipy.labs.spatial_models.hroi.</code><code class="sig-name descname">make_hroi_from_subdomain</code><span class="sig-paren">(</span><em class="sig-param">sub_domain</em>, <em class="sig-param">parents</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nipy/labs/spatial_models/hroi.html#make_hroi_from_subdomain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nipy.labs.spatial_models.hroi.make_hroi_from_subdomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate an HROi from a SubDomain instance and parents</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright J. Taylor and others
      <span class="lastupdated">
        Last updated on Sep 24, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>