define(["@jupyter-widgets/base","mapbox-gl","h3","s2Geometry","deck.gl","loaders.gl/csv"],(function(e,t,n,r,o,i){return function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=0,s=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);s.length;)s.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;return o(o.s=12)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(t,n){t.exports=e},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(8),o=n(9);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t,n){var r=n(10);function o(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},o(t,n,i||t)}e.exports=o},function(e,t,n){var r=n(11);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r,o,i="@deck.gl/jupyter-widget",c=n(1),l=n.n(c),u=n(3),s=n.n(u),a=n(4),f=n.n(a),p=n(5),d=n.n(p),y=n(0),m=n.n(y),b=n(6),h=n.n(b),v=n(7),g=n.n(v),O=n(2),j={fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',display:"flex",flex:"wrap",maxWidth:"500px",flexDirection:"column",zIndex:2};function x(e){if(!e.picked)return null;if(e.object===r)return o;var t={html:_(e.object),style:j};return o=t,r=e.object,t}var w=new Set(["position","index"]);function _(e){var t=document.createElement("div");for(var n in t.className="dataTable",e)if(!w.has(n)){var r=document.createElement("div");r.className="header",r.innerText=n;var o=document.createElement("div");o.className="value",o.innerText=P(e[n]);var i=document.createElement("div");k(i,r,o),i.appendChild(r),i.appendChild(o),t.appendChild(i)}return t.innerHTML}function k(e,t,n){Object.assign(t.style,{fontWeight:700,marginRight:"10px",flex:1}),Object.assign(n.style,{flex:"none",maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),Object.assign(e.style,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"stretch"})}function P(e){var t;if(Array.isArray(e)&&e.length>4)t="Array<".concat(e.length,">");else if("string"==typeof e)t=e;else if("number"==typeof e)t=String(e);else try{t=JSON.stringify(e)}catch(e){t="<Non-Serializable Object>"}return t.length>50&&(t=t.slice(0,50)),t}function S(e,t){var n=e;for(var r in t)n=n.replace("{".concat(r,"}"),t[r]);return n}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){var t=e.mapboxApiKey,r=e.container,o=e.jsonInput,i=e.tooltip,c=e.onComplete,u=e.handleClick;Promise.resolve().then((function(){var e=[n(13),n(14),n(15)];(function(e){Promise.resolve().then((function(){var s=[n(16),n(17)];(function(n,s){try{var a={};Object.keys(n).filter((function(e){return(e.indexOf("Layer")>0||e.indexOf("View")>0)&&0!==e.indexOf("_")})).map((function(e){return a[e]=n[e]})),s.registerLoaders([s.CSVLoader]);var f=new n.JSONConverter({configuration:{classes:a}}),p=f.convert(o),d=function(e){return e?e.html||e.text?function(t){if(!t.picked)return null;var n={style:e.style||j};return e.html?n.html=S(e.html,t.object):n.text=S(e.text,t.object),n}:x:null}(i),y=new n.DeckGL(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p,{map:e,mapboxApiAccessToken:t,onClick:u,getTooltip:d,container:r}));c&&c({jsonConverter:f,deckgl:y})}catch(e){console.error(e)}return{}}).apply(null,s)})).catch(n.oe)}).apply(null,e)})).catch(n.oe)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){function t(){return s()(this,t),d()(this,m()(t).apply(this,arguments))}return g()(t,e),f()(t,[{key:"defaults",value:function(){return M({},h()(m()(t.prototype),"defaults",this).call(this),{_model_name:t.model_name,_model_module:t.model_module,_model_module_version:t.model_module_version,_view_name:t.view_name,_view_module:t.view_module,_view_module_version:t.view_module_version,json_input:null,mapbox_key:null,selected_data:null,tooltip:null,width:"100%",height:500})}}],[{key:"serializers",get:function(){return M({},O.DOMWidgetModel.serializers)}},{key:"model_name",get:function(){return"DeckGLModel"}},{key:"model_module",get:function(){return i}},{key:"model_module_version",get:function(){return"7.3.0-beta.8"}},{key:"view_name",get:function(){return"DeckGLView"}},{key:"view_module",get:function(){return i}},{key:"view_module_version",get:function(){return"7.3.0-beta.8"}}]),t}(O.DOMWidgetModel),T=function(e){function t(){return s()(this,t),d()(this,m()(t).apply(this,arguments))}return g()(t,e),f()(t,[{key:"initialize",value:function(){var e=this;this.listenTo(this.model,"destroy",this.remove);var t=document.createElement("div");this.el.appendChild(t);var n="".concat(this.model.get("height"),"px"),r=Number.isFinite(this.model.get("width"))?"".concat(this.model.get("width"),"px"):this.model.get("width");t.style.width=r,t.style.height=n,t.style.position="relative";var o,i,c=this.model.get("mapbox_key"),l=JSON.parse(this.model.get("json_input")),u=this.model.get("tooltip");o="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css",(i=document.createElement("link")).type="text/css",i.rel="stylesheet",i.href=o,document.getElementsByTagName("head")[0].appendChild(i),C({mapboxApiKey:c,container:t,jsonInput:l,tooltip:u,onComplete:function(t){var n=t.jsonConverter,r=t.deckgl;e.jsonDeck={jsonConverter:n,deckgl:r}},handleClick:this.handleClick.bind(this)})}},{key:"remove",value:function(){this.jsonDeck&&(this.jsonDeck.deckgl.finalize(),this.jsonDeck=null)}},{key:"render",value:function(){h()(m()(t.prototype),"render",this).call(this),this.model.on("change:json_input",this.valueChanged.bind(this),this)}},{key:"valueChanged",value:function(){var e,t,n,r,o,i;e=JSON.parse(this.model.get("json_input")),t=this.jsonDeck,n=t.jsonConverter,r=t.deckgl,o=n.convert(e),r.setProps(o),(i=document.getElementsByClassName("mapboxgl-missing-css")[0])&&(i.style.display="none")}},{key:"handleClick",value:function(e){e&&(e.object&&e.object.points?this.model.set("selected_data",e.object.points):this.model.set("selected_data",e.object),this.model.save_changes())}}]),t}(O.DOMWidgetView);n.d(t,"MODULE_VERSION",(function(){return"7.3.0-beta.8"})),n.d(t,"MODULE_NAME",(function(){return i})),n.d(t,"DeckGLModel",(function(){return N})),n.d(t,"DeckGLView",(function(){return T})),n.d(t,"initDeck",(function(){return C}));var L=document.querySelector("body").getAttribute("data-base-url");L&&(window.__webpack_public_path__="".concat(L,"nbextensions/pydeck/nb_extension"))},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=i}])}));
//# sourceMappingURL=index.js.map