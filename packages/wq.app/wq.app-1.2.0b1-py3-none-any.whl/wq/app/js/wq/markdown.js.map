{"version":3,"file":"markdown.js","sources":["../../node_modules/@wq/markdown/src/markdown.js"],"sourcesContent":["import marked from 'marked';\nimport highlight from './highlight';\n\n// Exported module object\nvar md = {};\n\nmd.init = function(config) {\n    if (!config) {\n        config = {};\n    }\n\n    // Default variable names\n    if (!config.output) {\n        config.output = 'html'; // Look for {{html}} in template\n    }\n    if (!config.input) {\n        config.input = 'markdown'; // Replace w/parse(this.markdown)\n    }\n    md.config = config;\n};\n\nmd.context = function(context) {\n    var output = '';\n    if (context[md.config.input]) {\n        output = md.parse(context[md.config.input]);\n    }\n    var result = {};\n    result[md.config.output] = output;\n    return result;\n};\n\n// Parsing function (can be used directly)\nmd.parse = function(value) {\n    return md.postProcess(marked.parse(value));\n};\n\n// Override with custom post-processing function\nmd.postProcess = function(html) {\n    if (md.config.postProcess) {\n        return md.config.postProcess(html);\n    } else {\n        return html;\n    }\n};\n\n// Connect markdown processor to code highlighter\nmarked.setOptions({\n    highlight: function(code, lang) {\n        return highlight.highlight(lang, code).value;\n    }\n});\n\n// Run for server-rendered markdown\nmd.run = function($page) {\n    $page.find('pre code:not(.hljs)').each(function(i, el) {\n        highlight.highlightBlock(el);\n    });\n};\n\nexport default md;\n"],"names":["md","init","config","output","input","context","parse","result","value","postProcess","marked","html","setOptions","highlight","code","lang","run","$page","find","each","i","el","highlightBlock"],"mappings":";;;;;;;;;;;;AAIA,IAAIA,EAAE,GAAG,EAAT;;AAEAA,EAAE,CAACC,IAAH,GAAU,UAASC,MAAT,EAAiB;QACnB,CAACA,MAAL,EAAa;QACTA,MAAM,GAAG,EAAT;KAFmB;;;QAMnB,CAACA,MAAM,CAACC,MAAZ,EAAoB;QAChBD,MAAM,CAACC,MAAP,GAAgB,MAAhB,CADgB;;;QAGhB,CAACD,MAAM,CAACE,KAAZ,EAAmB;QACfF,MAAM,CAACE,KAAP,GAAe,UAAf,CADe;;;IAGnBJ,EAAE,CAACE,MAAH,GAAYA,MAAZ;CAZJ;;AAeAF,EAAE,CAACK,OAAH,GAAa,UAASA,OAAT,EAAkB;QACvBF,MAAM,GAAG,EAAb;;QACIE,OAAO,CAACL,EAAE,CAACE,MAAH,CAAUE,KAAX,CAAX,EAA8B;QAC1BD,MAAM,GAAGH,EAAE,CAACM,KAAH,CAASD,OAAO,CAACL,EAAE,CAACE,MAAH,CAAUE,KAAX,CAAhB,CAAT;;;QAEAG,MAAM,GAAG,EAAb;IACAA,MAAM,CAACP,EAAE,CAACE,MAAH,CAAUC,MAAX,CAAN,GAA2BA,MAA3B;WACOI,MAAP;CAPJ;;;AAWAP,EAAE,CAACM,KAAH,GAAW,UAASE,KAAT,EAAgB;WAChBR,EAAE,CAACS,WAAH,CAAeC,MAAM,CAACJ,KAAP,CAAaE,KAAb,CAAf,CAAP;CADJ;;;AAKAR,EAAE,CAACS,WAAH,GAAiB,UAASE,IAAT,EAAe;QACxBX,EAAE,CAACE,MAAH,CAAUO,WAAd,EAA2B;eAChBT,EAAE,CAACE,MAAH,CAAUO,WAAV,CAAsBE,IAAtB,CAAP;KADJ,MAEO;eACIA,IAAP;;CAJR;;;AASAD,MAAM,CAACE,UAAP,CAAkB;IACdC,SAAS,EAAE,mBAASC,IAAT,EAAeC,IAAf,EAAqB;eACrBF,UAAS,CAACA,SAAV,CAAoBE,IAApB,EAA0BD,IAA1B,EAAgCN,KAAvC;;CAFR;;AAOAR,EAAE,CAACgB,GAAH,GAAS,UAASC,KAAT,EAAgB;IACrBA,KAAK,CAACC,IAAN,CAAW,qBAAX,EAAkCC,IAAlC,CAAuC,UAASC,CAAT,EAAYC,EAAZ,EAAgB;QACnDR,UAAS,CAACS,cAAV,CAAyBD,EAAzB;KADJ;CADJ;;;;;;;;"}