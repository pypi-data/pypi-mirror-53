<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">
 
  <metal:border fill-slot="top_slot">
    <tal:border define="dummy python:request.set('enable_border',1)" />
  </metal:border>

<body>
  <div metal:fill-slot="main"
       tal:define="ledgerLocalizedTime nocall: context/ledgerLocalizedTime;
                   reports context/reports;
                   b_size request/b_size | python: 20;
                   utool context/@@plone_portal_state/portal_url;
                   b_start request/b_start | python: 0;
                   Batch python:modules['Products.CMFPlone'].Batch;
                   batch python:Batch(reports, int(b_size), int(b_start), orphan=2)">
      <h1 class="documentFirstHeading"><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
               tal:attributes="src string:${utool}/${icon}">&nbsp;
          <span tal:replace="context/Title | context/getId"/></h1>

      <div class="documentDescription" tal:define="desc context/Description"
           tal:content="desc"/>

      <div metal:use-macro="context/batch_macros/macros/navigation" />
      
      <table class="listing" summary="" tal:condition="reports">
          <tr class="listingBar">
               <th>&nbsp;</th>
               <th>Effective</th>
               <th>Name</th>
               <th align="right">Size</th>
               <th>Creator</th>
               <th>Created</th>
               <th>Status</th>
          </tr>
          <tr tal:repeat="report batch"
               tal:attributes="class python: repeat['report'].odd() and 'odd' or 'even'">
               <td>
                   <img src="" alt="" tal:define="icon python:report.getIcon(1)" 
                        tal:attributes="src string:${utool}/${icon}"/>
               </td>
               <td tal:content="python: report.effective().strftime('%Y/%m/%d')"/>
               <td>
                   <a href="" tal:attributes="href string:${report/absolute_url}"  
                              tal:content="report/title_or_id"/>
               </td>
               <td align="right" tal:content="report/get_size | nothing"/>
               <td tal:content="report/creator | nothing"/>
               <td tal:content="python: ledgerLocalizedTime(report.CreationDate(), long_format=True)"/>
               <td tal:content="report/status | nothing"/>
           </tr>
      </table>

      <div tal:replace="structure provider:plone.belowcontentbody">
           Document actions (print, sendto etc)
      </div>

  </div>
 
</body>
</html>
