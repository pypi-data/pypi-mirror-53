<html tal:replace="structure python: context.manage_page_header(title=context.prettyTitle)"/>

<script type="text/javascript">
<!-- 

isSelected = false;

function toggleSelect() {
  if (isSelected == false) {
    for (i = 0; i < document.objectItems.length; i++)
      document.objectItems.elements[i].checked = true ;
    isSelected = true;
    document.objectItems.selectButton.value = "Deselect All";
    return isSelected;
  }
  else {
    for (i = 0; i < document.objectItems.length; i++)
      document.objectItems.elements[i].checked = false ;
    isSelected = false;
    document.objectItems.selectButton.value = "Select All";
    return isSelected;       
  }
}

//-->
</script>


    <span tal:replace="structure python:context.manage_tabs(help_topic='orders.stx',
                                                              help_product='BastionLedger')"/>

       <table border="0" width="100%" cellspacing="0" cellpadding="0"
              tal:define="products context/filtered_meta_types">
          <tr>
              <td align="right" valign="top" class="form-element">
                 <form method="get" action="" tal:attributes="action request/URL1">
                     <div tal:condition="python: len(products) > 1" tal:omit-tag="">
                         <select class="form-element" name=":action"
                                 onchange="" tal:attributes="onchange string:location.href='${request/URL1}/'+this.options[this.selectedIndex].value">
                             <option value="manage_workspace" disabled>Select type to add...</option>
                             <option tal:repeat="product products"
                                     value="" tal:attributes="value product/action"
                                     tal:content="product/name"/>
                          </select>
                          <input class="form-element" type="submit" value=" Add ">
                      </div>
                      <div tal:condition="python: len(products) == 1" tal:omit-tag="">
                        <div tal:define="product python:products[0]" tal:omit-tag="">
                          <input type="hidden" name=":method" value="" tal:attributes="value product/action"/>
                          <input class="form-element" type="submit" name="submit" value=""
                                 tal:attributes="value string: Add ${product/name}" />
                        </div>
                      </div>
                 </form>
              </td>
          </tr>
       </table>
       <br/>

       <form action=""  name="objectItems" method="post"
	     tal:attributes="action request/URL1"
	     tal:define="orders context/orderValues;
		         global total context/zeroAmount">
       <table border="0" cellpadding="2" cellspacing="0" width="100%">
           <tr class="list-header" tal:condition="orders">
               <td width="16">&nbsp;</td>
               <td width="25" class="list-item"></td>
               <td class="list-item">Date</td>
               <td class="list-item">Number</td>
               <td class="list-item">Status</td>
               <td class="list-item" align="right">Amount</td>
               <td>&nbsp;</td>
               <td class="list-item">Entered by</td>
               <td class="list-item">Last Modified</td>
               <td class="list-item"></td>
           </tr>
           <tr tal:repeat="item orders"
               tal:attributes="class python: repeat['item'].index % 2 and 'row-hilite' or 'row-normal'">
               <td class="list-item">
                  <input type="checkbox" name="ids:list" value="" tal:attributes="value item/getId">
               </td>
               <td class="list-item">
                  <img src="" tal:attributes="src item/icon"/>
               </td>
               <td class="list-item" tal:content="python: item.orderdate.strftime('%Y/%m/%d')"/>
               <td class="list-item">
                   <a href="" tal:attributes="href string:${item/getId}/manage_workspace"  
                              tal:content="string:${item/getId} (${item/title})"/>
               </td>
               <td class="list-item" tal:content="item/status"/>
               <td class="list-item" align="right" nowrap
	           tal:define="net item/getNet;
	                       global total python: total + net"
		   tal:content="net"
		   tal:on-error="string:N/a" />
               <td>&nbsp;</td>
               <td class="list-item" tal:content="item/entered_by"/>
               <td class="list-item" tal:content="item/modificationTime"/>
	       <td class="list-item" tal:define="reconciled item/reconciled">
		 <span tal:condition="reconciled">&#10004;</span>
	       </td>
           </tr>
	   <tr class="list-header" tal:condition="orders">
               <td class="form-label" colspan="5" align="right">Total</td>
               <td class="form-label" align="right" nowrap tal:content="total"/>
               <td>&nbsp;</td>
               <td colspan="3">&nbsp;</td>
           </tr>

           <tr>
               <td  colspan="8" class="form-element">
                   <input type="submit" value=" Delete  " name="manage_delObjects:method"
                          tal:condition="orders"/>
                   <input type="submit" value=" Cancel  " name="manage_cancelObjects:method"
                          tal:condition="orders"/>
                   <input type="submit" value=" Invoice " name="manage_invoiceObjects:method"
                          tal:condition="orders"/>
                   <input type="submit" value="    Pay  " name="manage_reconcileObjects:method"
                          tal:condition="orders"/>
                   <input type="submit" value=" Arrears " name="manage_arrearsObjects:method"
                          tal:condition="orders"/>
                  <input class="form-element" type="submit" name="selectButton" value="Select All"
                         onClick="toggleSelect(); return false" />

               </td>
           </tr>
       </table>
       </form>
<html tal:replace="structure context/manage_page_footer"/>





